<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>个人信息修改</title>
    <link rel="stylesheet" type="text/css" href="../layui/css/layui.css"/>
    <script charset="UTF-8" type="text/javascript" src="../layui/layui.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        function judge()
        {
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            var mail = document.getElementById("mail").value;
            //console.log(username);
            $.ajax({
                url:"actived", 	//url地址
                async:true,					//是否是异步请求
                type:"POST",				//请求方式
                data:{"name":username,"password":password,"mail":mail},  //带给服务器的参数
                success:function(data){		//成功后的回调函数
                    //data 是服务器返回的参数
                    alert(data.name);
                },
                dataType:"json"  //返回数据data的类型
            });
        }
    </script>
</head>
<body>
<div style="padding: 10px;" id="nav2" th:method="post" th:name="${state}">
    <ul class="layui-nav layui-bg-green" lay-filter="">
        <li style="display: block;" class="layui-nav-item">
            <span style="float: left;" class="layui-icon layui-icon-username" th:text="${uname}"></span>
        </li>
        <li class="layui-nav-item layui-this">
            <a><i class="layui-icon layui-icon-console" style="font-size: 20px;margin: 0px 10px;"></i>控制台</a>
            <dl class="layui-nav-child">
                <dd><a href="/addOrder">新增订单</a></dd>
                <dd><a href="/checkOrder">查看订单</a></dd>
                <dd><a href="/checkExpense">费用管理</a></dd>
            </dl>
        </li>
        <!-- 设定layui-this来指向当前页面,即绿色滑块移动到该分类下方 -->
        <li class="layui-nav-item">
            <a><i class="layui-icon layui-icon-home" style="font-size: 20px;margin: 0px 10px;"></i>个人中心</a>
            <dl class="layui-nav-child">
                <dd><a href="/user/checkPersonInformation">查看个人信息</a></dd>
            </dl>
        </li>
        <li class="layui-nav-item">
            <a><i class="layui-icon layui-icon-user" style="font-size: 20px;margin: 0px 10px;"></i>我</a>
            <dl class="layui-nav-child">
                <dd><a href="/user/update">修改信息</a></dd>
                <dd><a href="/user/retreat">退了</a></dd>
            </dl>
        </li>
    </ul>
</div>
<div class="layui-tab">
    <ul class="layui-tab-title">
        <li class="layui-this">绑定邮箱</li>
        <li th:id="id1">修改密码</li>
        <li th:id="id2">修改用户名</li>
        <li th:id="id3">绑定手机号</li>
    </ul>
    <div class="layui-tab-content">
        <div class="layui-tab-item layui-show">
            <form class="layui-form" th:action="@{/user/updateMail}" method="post">
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        用户名：
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" name="username" id="username" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请输入用户名"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        密码：
                    </label>
                    <div class="layui-input-inline">
                        <input type="password" name="password" class="layui-input" id="password" required lay-verify="required" autocomplete="off" placeholder="请输入密码"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        邮箱：
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" name="mail" class="layui-input" id="mail" required lay-verify="required" autocomplete="off" placeholder="请输入邮箱"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        验证码：
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" name="securityCode" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请输入验证码"><br>
                    </div>
                    <button onclick=judge() class="layui-btn" >获取验证码</button>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" type="submit" >提交</button>
                        <button class="layui-btn" type="reset">重置</button>
                    </div>
                </div>
            </form>
        </div>

        <div class="layui-tab-item">
            <form class="layui-form" th:action="@{/user/updatePassword}" method="post">
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        用户名：
                    </label>
                    <div class="layui-input-inline">
                        <input type="test" name="username" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请输入用户名"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        旧密码：
                    </label>
                    <div class="layui-input-inline">
                        <input type="password" name="oldPassword" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请输入旧密码"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        新密码：
                    </label>
                    <div class="layui-input-inline">
                        <input type="password" name="newPassword1" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请输入新密码"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        确认密码：
                    </label>
                    <div class="layui-input-inline">
                        <input type="password" name="newPassword2" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请再次输入新密码"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" type="submit">提交</button>
                        <button class="layui-btn" type="reset">重置</button>
                    </div>
                </div>
            </form>
        </div>

        <div class="layui-tab-item">
            <form class="layui-form" th:action="@{/user/updateUsername}" method="post">
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        用户名：
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" name="username" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请输入用户名"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        密码：
                    </label>
                    <div class="layui-input-inline">
                        <input type="password" name="password" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请输入密码"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        新用户名：
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" name="newUsername" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请输入新用户名"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" type="submit">提交</button>
                        <button class="layui-btn" type="reset">重置</button>
                    </div>
                </div>
            </form>
        </div>

        <div class="layui-tab-item">
            <form class="layui-form" th:action="@{/user/updatePhone}" method="post">
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        用户名：
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" name="username" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请输入用户名"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        密码：
                    </label>
                    <div class="layui-input-inline">
                        <input type="password" name="password" class="layui-input" required lay-verify="required" autocomplete="off" placeholder="请输入密码"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">
                        电话：
                    </label>
                    <div class="layui-input-inline">
                        <input type="text" name="phone" class="layui-input" lay-verify="required|phone" autocomplete="off" placeholder="请输入电话"><br>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" type="submit">提交</button>
                        <button class="layui-btn" type="reset">重置</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
    !function init(){
        var oDiv = document.getElementById('nav2');
        var myLi1 = document.getElementById('id1');
        var myLi2 = document.getElementById('id2');
        var myLi3 = document.getElementById('id3');
        var state = oDiv.getAttribute("name");
        //console.log(state);
        oDiv.style.display = (state === "1") ? "none" : "";
        myLi1.style.display = (state === "1") ? "none" : "";
        myLi2.style.display = (state === "1") ? "none" : "";
        myLi3.style.display = (state === "1") ? "none" : "";
    }();
    layui.use(['element','form'],function () {
        var element = layui.element
            ,form=layui.form;
    });
</script>

</body>
</html>